{% extends "base.html" %}

{% block title %}Client Magic - Upcoming Events{% endblock %}

{% block styles %}
<style>
    .events-container {
        margin-top: 20px;
    }
    .month-header {
        background-color: #f3f4f6;
        padding: 10px 15px;
        border-radius: 5px;
        margin-bottom: 15px;
        font-weight: bold;
        font-size: 1.2rem;
        color: #374151;
    }
    .event-list {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 15px;
        margin-bottom: 20px;
    }
    .event-card {
        border-radius: 8px;
        padding: 15px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .birthday-card {
        background-color: #e8f5e9;
        border-left: 4px solid #4caf50;
    }
    .holiday-card {
        background-color: #e3f2fd;
        border-left: 4px solid #2196f3;
    }
    .event-date {
        font-weight: bold;
        margin-bottom: 5px;
    }
    .event-title {
        font-size: 1.1rem;
        margin-bottom: 5px;
    }
    .event-type {
        color: #6b7280;
        font-size: 0.9rem;
    }
    .no-events {
        color: #6b7280;
        font-style: italic;
        margin-bottom: 20px;
    }
    .month-navigation {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
    }
    .nav-button {
        padding: 8px 16px;
        background-color: #f3f4f6;
        border-radius: 5px;
        color: #374151;
        text-decoration: none;
        transition: background-color 0.2s;
    }
    .nav-button:hover {
        background-color: #e5e7eb;
    }
</style>
{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <div class="flex justify-between items-center mb-6">
        <h1 class="text-3xl font-bold text-gray-800">Upcoming Events</h1>
    </div>
    
    <div class="bg-white rounded-lg shadow-md p-6 mb-6">
        <p class="text-gray-700">
            This page shows upcoming birthdays for your clients and holidays for {{ month_name }} {{ year }}.
        </p>
    </div>
    
    <div class="month-navigation">
        {% set prev_month = month - 1 if month > 1 else 12 %}
        {% set prev_year = year if month > 1 else year - 1 %}
        {% set next_month = month + 1 if month < 12 else 1 %}
        {% set next_year = year if month < 12 else year + 1 %}
        
        <a href="{{ url_for('main.events', month=prev_month, year=prev_year) }}" class="nav-button">
            <i class="fas fa-chevron-left mr-2"></i> Previous Month
        </a>
        
        <span class="font-bold text-xl">{{ month_name }} {{ year }}</span>
        
        <a href="{{ url_for('main.events', month=next_month, year=next_year) }}" class="nav-button">
            Next Month <i class="fas fa-chevron-right ml-2"></i>
        </a>
    </div>
    
    <div class="events-container">
        <div class="month-header">
            {{ month_name }} {{ year }}
        </div>
        
        {% set birthday_events = [] %}
        {% set holiday_events = [] %}
        
        {% for event in events %}
            {% if event.type == 'birthday' %}
                {% set _ = birthday_events.append(event) %}
            {% elif event.type == 'holiday' %}
                {% set _ = holiday_events.append(event) %}
            {% endif %}
        {% endfor %}
        
        <h2 class="text-xl font-semibold mb-4">Client Birthdays</h2>
        {% if birthday_events %}
            <div class="event-list">
                {% for event in birthday_events %}
                    <div class="event-card birthday-card">
                        <div class="event-date">{{ month_name }} {{ event.date }}</div>
                        <div class="event-title">{{ event.title }}</div>
                        <div class="event-type">Birthday</div>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="no-events">No client birthdays this month</div>
        {% endif %}
        
        <h2 class="text-xl font-semibold mb-4 mt-8">Holidays</h2>
        {% if holiday_events %}
            <div class="event-list">
                {% for event in holiday_events %}
                    <div class="event-card holiday-card">
                        <div class="event-date">{{ month_name }} {{ event.date }}</div>
                        <div class="event-title">{{ event.title }}</div>
                        <div class="event-type">Holiday</div>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="no-events">No holidays this month</div>
        {% endif %}
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Add any JavaScript functionality here if needed
    });
</script>
{% endblock %} 